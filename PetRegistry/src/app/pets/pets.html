<div class="container mt-3">
  <h5 class="text-center">Här kan du lägga till djur</h5>
@if(isLoading()) {
    <div class="text-center my-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  } @else if (error()) {
    <div class="alert alert-danger" role="alert">
      Error: {{ error() }}
    </div>
  } 
  <form class="mx-auto w-50" [formGroup]="petForm" (ngSubmit)="savePet()">
    <div class="mb-3">
      <label for="animalName" class="form-label">Namn på djuret</label>
      <input
        id="animalName"
        type="text"
        class="form-control"
        placeholder="Namn på djuret"
        formControlName="name" [class.is-invalid]="
          petForm.get('name')?.invalid && petForm.get('name')?.touched
        "
      />
      <div class="invalid-feedback">Namn på djuret är obligatoriskt.</div>
    </div>

    <div class="mb-3">
      <label for="species" class="form-label">Art</label>
      <input id="species" type="text" class="form-control" formControlName="species" placeholder="Art" [class.is-invalid]="
          petForm.get('species')?.invalid && petForm.get('species')?.touched
        "/>
      <div class="invalid-feedback">Art är obligatoriskt.</div>
    </div>

    <div class="mb-3">
      <label for="breed" class="form-label">Ras</label>
      <input id="breed" type="text" class="form-control" formControlName="breed" placeholder="Ras" />
    </div>

    <div class="mb-3">
      <label for="color" class="form-label">Färg</label>
      <input id="color" type="text" class="form-control" formControlName="color" placeholder="Färg" />
    </div>

    <div class="mb-3">
      <label for="dob" class="form-label">Födelsedatum</label>
      <input
        id="dob"
        type="date"
        class="form-control"
        formControlName="dateOfBirth"
        [attr.max]="today"
      />
    </div>

    <div class="mb-3">
      <label class="form-label d-block">Kön</label>

      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="genderFemale"
          formControlName="gender"
          [value]="'Female'"
          [class.is-invalid]="
            petForm.get('gender')?.invalid && petForm.get('gender')?.touched
          "
        />
        <label class="form-check-label" for="genderFemale">Hona</label>
      </div>

      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="genderMale"
          formControlName="gender"
          [value]="'Male'"
          [class.is-invalid]="
            petForm.get('gender')?.invalid && petForm.get('gender')?.touched
          "
        />
        <label class="form-check-label" for="genderMale">Hane</label>
      </div>
      
      @if(petForm.get('gender')?.invalid && petForm.get('gender')?.touched) {
        <div class="invalid-feedback d-block">Kön är obligatoriskt.</div>
      }
    </div>

    <div class="mb-3">
      <label class="form-label d-block">Är ditt djur chippat?</label>

      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="chipYes"
          formControlName="isMicrochip"
          [value]="true"
          [class.is-invalid]="
            petForm.get('isMicrochip')?.invalid && petForm.get('isMicrochip')?.touched
          "
        />
        <label class="form-check-label" for="chipYes">Ja</label>
      </div>

      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="chipNo"
          formControlName="isMicrochip"
          [value]="false"
          [class.is-invalid]="
            petForm.get('isMicrochip')?.invalid && petForm.get('isMicrochip')?.touched
          "
        />
        <label class="form-check-label" for="chipNo">Nej</label>
      </div>
      
      @if(petForm.get('isMicrochip')?.invalid && petForm.get('isMicrochip')?.touched) {
        <div class="invalid-feedback d-block">Du måste ange om djuret är chippat.</div>
      }
    </div>

    <div class="mb-3">
      <label class="form-label d-block">Är ditt djur kastrerat?</label>

      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="neuteredYes"
          formControlName="isNeutered"
          [value]="true"
          [class.is-invalid]="
            petForm.get('isNeutered')?.invalid && petForm.get('isNeutered')?.touched
          "
        />
        <label class="form-check-label" for="neuteredYes">Ja</label>
      </div>

      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="neuteredNo"
          formControlName="isNeutered"
          [value]="false"
          [class.is-invalid]="
            petForm.get('isNeutered')?.invalid && petForm.get('isNeutered')?.touched
          "
        />
        <label class="form-check-label" for="neuteredNo">Nej</label>
      </div>
      
      @if(petForm.get('isNeutered')?.invalid && petForm.get('isNeutered')?.touched) {
        <div class="invalid-feedback d-block">Du måste ange om djuret är kastrerat.</div>
      }
    </div>

    <div class="mb-3 text-center">
      <button type="submit" class="btn btn-primary">{{ isEditMode() ? 'Spara' : 'Lägg till' }}</button>
    </div>
  </form>
</div>
